<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="User">

    <select id="getUserList" resultType="kr.co.siggy.server.common.CamelCaseMap">
		SELECT
			SEQ
			, ID
			, USER_NAME
			, IMG
			, DESCRIPT
		FROM 
			USER
    </select>

    <select id="getFoodBookmarkList" resultType="kr.co.siggy.server.common.CamelCaseMap">
		SELECT 
		    FL.SEQ,
		    FL.NAME,
		    FL.DESCRIPT
		FROM 
		    FOOD_LOCATION FL
		JOIN 
		    USER_FAVORITE UF
		    ON UF.MAP_SEQ = FL.SEQ
		WHERE
		    UF.CATEGORY = 'food'
		    AND UF.USER_ID = #{id}
        </select>

    <select id="getPlaceBookmarkList" resultType="kr.co.siggy.server.common.CamelCaseMap">
		SELECT 
		    FL.SEQ,
		    FL.NAME,
		    FL.DESCRIPT
		FROM 
		    PLACE_LOCATION FL
		JOIN 
		    USER_FAVORITE UF
		    ON UF.MAP_SEQ = FL.SEQ
		WHERE
		    UF.CATEGORY = 'place'
		    AND UF.USER_ID = #{id}
    </select>

    <insert id="insertLike" >
		INSERT INTO USER_FAVORITE 
			(USER_ID, CATEGORY, MAP_SEQ) 
		VALUES
			(#{id}, #{category}, #{seq})
    </insert>

    <delete id="deleteLike" >
		DELETE FROM 
			USER_FAVORITE 
		WHERE 
			USER_ID = #{id}
		AND
			MAP_SEQ = #{seq}
		AND
			CATEGORY = #{category}
    </delete>
    
</mapper>